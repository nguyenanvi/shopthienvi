<!DOCTYPE html>
<html lang="vi-VN">
  <head>
    <meta charset="UTF-8" />
    <title>Bảng giá in ảnh - gửi hình em in lấy liền</title>
    <link rel="shortcut icon" href="favicon.jpg" type="image/x-icon">
    <meta name="robots" content="index, follow" />

    <meta name="author" content="An Vĩ - Dịch vụ in ảnh tại An Giang" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta name="description" content="Dịch vụ in ảnh giá rẻ: in ảnh 6x9, A3, A4, A5, ảnh chân dung. Ép nhựa, in lấy ngay. Gửi hình qua email, Zalo hoặc điện thoại. Liên hệ ngay!" />
    <meta name="keywords" content="in ảnh, dịch vụ in ảnh, in ảnh lấy ngay, ép nhựa, in ảnh giá rẻ, An Giang" />

    <meta property="og:title" content="Dịch vụ in ảnh tại An Giang" />
    <meta property="og:description" content="In ảnh 6x9, A3, A4, A5, chân dung, ép nhựa, in lấy ngay. Liên hệ ngay để nhận ảnh chất lượng cao!" />
    <meta property="og:image" content="IMG_1197.jpg" />
    <meta property="og:url" content="https://nguyenanvi.github.io/Printing" />
    <meta property="og:type" content="website" />

    <script src="html2canvas.js"></script>

    <style>
      @font-face {
        font-family: "Quicksand";
        src: url("Quicksand-SemiBold.ttf") format("woff2");
      }

      :root {
        --main-primary: #220401;
        --main-primary-diff: #fff;
        --main-secondary: #fff;
        --main-secondary-diff: #000;
        --body: #f2e2d5;

        font-family: "Quicksand", sans-serif;
        font-optical-sizing: auto;
        font-weight: 600;
        font-style: normal;
      }

      * {
        box-sizing: border-box;
      }
      body {
        background-color: var(--body);
      }
      body > * {
        margin-inline: auto !important;
        max-width: 1000px !important;
        overflow: hidden;
      }
      .container {
        background-color: var(--main-secondary);
        color: var(--main-secondary-diff);

        padding-inline: 2rem;
        padding-block: 1rem;
        margin: 2rem;

        & > h1 {
          text-align: center;
          font-size: medium;
        }
      }
      .container:has(.header) {
        padding: 0 !important;
      }
      .container.contact {
        margin-bottom: 0;
      }
      .header {
        overflow: hidden;
        max-height: 200px;
        height: fit-content;
        color: #fff;
        display: flex;
        align-items: center;

        & > img {
          width: 100%;
        }
        & > p {
          font-size: larger;
          background-color: var(--main-primary);
          color: var(--main-primary-diff);
          position: absolute;
          padding: 2rem;
          z-index: 999;
        }
      }
      .decor-icons {
        background-color: transparent !important;
        padding-block: 0 !important;
        margin-block: 0 !important;
        display: flex;
        flex-direction: row;
        justify-content: center;

        & > * {
          margin-inline: 1rem;
          height: 2rem;
          width: 2rem;
          aspect-ratio: 1/1;
          object-fit: cover;
        }
      }

      .contact {
        background-color: var(--main-primary);
        color: var(--main-primary-diff);
        display: flex;
        justify-content: space-between;
        align-items: end;
      }
      .contact-info {
        padding-inline: 2rem;
        & > p {
          display: flex;
          align-items: center;
          & > img {
            margin-right: 1rem;
            width: 1.5em;
            height: 1.5em;
            object-fit: cover;

            border: 2px solid #fff;
            border-radius: 50%;
          }
        }
      }
      #qrzalo {
        margin-right: 2rem;
        width: max-content;
        height: 100px;
        object-fit: cover;
      }
      a.beautylink {
        text-decoration: unset;
        font-weight: bold;
        box-shadow: inset 0 0 0 0 var(--main-primary-diff);
        color: var(--main-primary-diff);
        margin: 0 0;
        padding: 0 -1rem;
        transition: color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
      }
      a.beautylink:hover {
        box-shadow: inset 0 1.5rem 0 0 var(--main-primary-diff);
        color: var(--main-primary);
      }
     
      @media only screen and (max-width: 1000px) {
        body {
          margin: 0;
        }
        body > * {
          padding-inline: 0 !important;
          margin-inline: 0 !important;
        }

        .contact {
          flex-direction: column;
          align-items: center;

          & > img {
            width: calc(50% - 4rem) !important;
            height: max-content !important;
          }
        }
      
      }
      @media only screen and (max-width: 600px) {
        .contact {
          flex-direction: column;
          align-items: center;

          & > img {
            width: calc(50% - 4rem) !important;
            height: max-content !important;
          }
        }
    
      }

      .product {
        margin-inline: auto;
        display: flex;
        flex-direction: row;
        padding: 2rem;
        width: 100%;
        max-width: 750px;
        background-color: white;
        position: relative;
      }
      /* ----- Photo Section ----- */
      .product__photo {
        position: relative;
        margin-right: 2rem;
        
        display: flex;
        justify-content: center;
      }
      .photo-container {
        display: flex;
        flex-direction: column;

        height: auto ;
        max-width: 400px;
        width: 100%;
      }
      .photo-main {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .photo-main img {
        box-shadow: 4px 4px 25px -2px rgba(0, 0, 0, 0.3);
        border-radius: 16px;
        height: auto ;
        width: inherit !important;
        max-width: 400px;
        aspect-ratio: 1/1;
        object-fit: cover ;
      }
      .photo-album {
        height: fit-content;
        width: inherit;

        overflow-x: visible;
        padding: 0;

        border-radius: 0 0 6px 6px;
      }
      .photo-album ul {
        display: flex;
        justify-content: flex-start;
        list-style: none;
        padding: 0;
      }
      .photo-album li {
        width: 75px;
        height: 75px;
        border-radius: 8px;
        overflow: hidden;
        margin: 0 1em 0  0;
        padding: 0;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);

        &>img{
          width: 100%;
          object-fit: cover;
        }

        transition: transform .3s ease-in-out;

        &:hover{
          transform: scale(105%);
        }
      }
      /* ----- Informations Section ----- */
      .product__info {
        height: fit-content;
        padding: 0 2rem;
      }
      .title h1 {
        margin-bottom: 0em;
        color: #4c4c4c;
        font-size: 1.5em;
        font-weight: 900;
      }
      .title span {
        font-size: 0.7em;
        color: #a6a6a6;
      }
      .price {
        color: #ff3f40;
        font-size: 1.2em;
      }
      .price span {
        padding-left: 0.15em;
        font-size: 2em;
        margin: 0;
      }
      .variant {
        overflow: auto;
      }
      /* ----- Button Styles for Specifications ----- */
      .spec-option {
        display: inline-block;
        margin: 5px;
        padding: 10px 15px;
        background-color: #fff;
        color: #0172e3;
        border: 2px solid #0172e3;
        border-radius: 5px;
        cursor: pointer;
        font-size: medium;
        font-weight: bold;
      }
      .spec-option:hover {
        background-color: #b6daff;
      }
      .spec-option.active {
        background-color: #0172e3;
        color: #fff;
      }

      button, a[type=button], a[type=button]:visited{

        display: inline-block;
        text-decoration: none;

        height: inherit;
        width: inherit;

        font-family: "Quicksand";
        padding: 1rem 2rem;
        font-size: large;
        
        color: var(--main-primary-diff);
        border: none;
        border-radius: 12px;
        box-shadow: 0 0 10px #aaa;
        background-color: var(--main-primary);

        transition: transform .3s ease-in-out;
        &:hover{
          transform: scale(105%);
        }
      }

      /* ----- Buy Button ----- */
      .buy--btn {
        border: none;
        box-shadow: 2px 2px 25px -7px #4c4c4c;
        cursor: pointer;
        border-radius: 7px;

        width:calc(10em + 6px);
        height:calc(3em + 6px);
        font-size:1.5em;
        font-weight:bold;

        position: relative;
        bottom: -1.1rem;
        animation:slidebg 2s linear infinite;
      }
      .buy--btn:disabled{
        background-color: #474747;
        text-decoration:line-through;
        cursor:no-drop;
      }
      .buy--btn::before{
        display: none;
        content: "Chọn phân loại có sẵn sau đó nhấn tư vấn.";
      }
      .buy--btn:disabled:hover::before{
        display: block;
        top: -4rem;
        left: -1px;
        padding: 1rem 2rem;
        border-radius: 7px !important;
        line-clamp: 2;
        font-size: medium;
        position: absolute;
        background-color: #ff3f40;
      }

      .container :has(button){
        overflow: visible;
      }
      

      @keyframes slidebg {
        to {
          background-position:10em;
        }
      }
      /* ----- Notification Popup ----- */
      .notification-overlay{
        height: 100vh !important;
        width: 100vw !important;
        max-width: 100vw !important;
        position: fixed;

        top: 0px;
        left: 0px;

        background-color: #000a;
        z-index: 1000;

        & a{
          cursor: pointer;
        }
      }
      .notification-popup {
        max-width: 750px;
        width: 50%;

        position: fixed;
        top: 35%;
        left: calc(50% - (750px / 2));
        background: #fff;
        color: #000;
        padding: 15px 20px;
        border: 1px solid #aaa;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        z-index: 1000;

        &>.notification-header{
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-block: 0;
          padding-block: 0;
          border-bottom: 1px solid #aaa;

          &> h2{
            color: #666;
          }

          & > a{
            background-color: red;
            color: white;
            border-radius: 7px;
            transform: scaleX(105%);
            padding: 1rem;
            transition: transform .3s ease-in-out;
            &:hover{
              transform: scaleY(105%) scaleX(110%);
            }
          }
        }
        &>.notification-body{
          text-indent: 1rem;
          font-size: x-large !important;
          padding-block: 1rem;
        }
        &>.notification-footer{
          display: flex;
          justify-content: flex-end;
          align-items: end;

          &> a{
            background-color: var(--main-primary);
            color: var(--main-primary-diff);
            border: 2px solid var(--main-primary);

            &:last-child{
              color: var(--main-primary);
              background-color: var(--main-primary-diff);
              border: 2px solid var(--main-primary);
            }
            margin-left: 8px;
            border-radius: 7px;
            padding:  0.5rem 1rem;
            transition: transform .3s ease-in-out;
            &:hover{
              transform: scale(105%);
            }
          }
        }
      }
      .notification-popup a {
        color: #ff3f40;
        text-decoration: none;
        font-weight: bold;
      }
      .notification-popup a:hover {
        text-decoration: underline;
      }
      #home-btn-alternative{
        display:none;
        text-align: center;
        width: 100%;
        max-width: 400px;
        margin-inline: auto;
      }


      @media only screen and (max-width: 1000px) {
        .product{
          flex-direction: column;
          padding: 1rem !important;
          &>*{
            margin-inline: 0;
            margin-block-start: 1rem;
          }
        }
        .product__info{
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          & > *{
          width: 100%;
          max-width: 400px;
          
        }}
        #home-btn{
          display: none;
        }
        #home-btn-alternative{
          display: block;
        }
        h3{
          margin:0;
        }
        #buy--btn{
          margin-bottom: 2rem;
        }
        .notification-popup {
          max-width: 100%;
          width: 100%;

          position: fixed;
          top: 35%;
          left: 0px;
          border-radius: 5px;
          box-shadow: 0 2px 5px rgba(0,0,0,0.3);
          z-index: 1000;

        }
      }
      @media only screen and (max-width: 600px) {
        .notification-footer{
          flex-direction: column;
          &>*{
            width: 100%;
            margin-left: 0;
            margin-top: 8px;
            text-align: center;
          }
        }
        .product__info{
          margin: 0;
          padding: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <p>in cả thế giới !!!</p>
        <img id="parallax" src="header.jpg" alt="" />
      </div>
    </div>
    <div class="container decor-icons">
      <img src="icon1.png" alt="" />
      <img src="icon2.png" alt="" />
      <img src="icon3.png" alt="" />
      <img src="icon4.png" alt="" />
    </div>
    <div id="product" class="container product">
      <a type="button" id="home-btn-alternative" href="index.html">&#127968;&nbsp; trang chủ</a>
      <div class="product__photo">
        <div class="photo-container">
          <div class="photo-main">
            <img id="mainImage" src="" alt="Product Image">
          </div>
          <div class="photo-album">
            <ul id="photoAlbum"></ul>
          </div>
        </div>
      </div>
      <div class="product__info">
          <a id="home-btn" type="button" href="index.html">&#127968;&nbsp; trang chủ</a>
          <div class="title">
            <h1 id="productName">Product Name</h1>
            <span id="productCode">COD: 00000</span>
          </div>
          <div class="price">
            <h3>Giá:</h3>
            <span id="productPrice"></span>
          </div>
          <div class="variant">
            <h3>Phân loại</h3>
            <div id="specifications"></div>
          </div>
          <button id="buy--btn" class="buy--btn" disabled="disabled">Đặt in và tư vấn</button>
        </div>
    </div>
    <div class="container contact">
      <div class="contact-info">
        <hr />
        <p>
          <img src="icon-phone.png" alt="" />in gì alo mình:&nbsp;&nbsp;
          <a href="tel:+84939963285" class="beautylink">0939.963.285</a>
        </p>
        <p>
          <img src="icon-zalo.png" alt="" />zalo (Quét mã - gửi
          hình):&nbsp;&nbsp;
          <a href="https://zalo.me/0939963285" class="beautylink"
            >0939.963.285</a
          >
        </p>
        <p>
          <img src="icon-email.png" alt="" />email:&nbsp;&nbsp;
          <a href="mailto:nguyenanvi122333@gmail.com" class="beautylink"
            >nguyenanvi122333@gmail.com</a
          >
        </p>
        <hr />
        <p>
          <a href="https://github.com/nguyenanvi" class="beautylink"
            >web nhà làm</a
          >&nbsp;|&nbsp; ver. 1.0
        </p>
      </div>
      <img src="QR_zalo.png" alt="" id="qrzalo" />
    </div>

    <script>
      let selectedSpecs = {}; // To store the user's selected specification indices

      // Helper: Get query parameter from URL
      function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
      }

      // This function will update both the price and the displayed image(s)
      function updateDisplay(product, defaultImages, mainImage, photoAlbum) {
        const specKey = Object.values(selectedSpecs).join("_");
        let buyButton = document.getElementById('buy--btn');

        // Update the price
        const productPriceElement = document.getElementById("productPrice");
        if ((product.specification[specKey] !== undefined) && (!isNaN(product.specification[specKey]))) {
          const price = product.specification[specKey];
          productPriceElement.textContent = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(price);
          + "đ";
          buyButton.removeAttribute('disabled');
        } else if ((product.specification[specKey] !== undefined) && (isNaN(product.specification[specKey]))) {
          const price = product.specification[specKey];
          productPriceElement.textContent = product.specification[specKey];
          if(product.specification[specKey] === "Không có hàng"){
            buyButton.setAttribute('disabled', 'disabled');
          } else{
            buyButton.removeAttribute('disabled');
          }
        } else {
          productPriceElement.textContent = product.base_price;
          buyButton.setAttribute('disabled', 'disabled');
        }
        
        // Update the displayed image based on the specKey
        if (specKey && product.images[specKey] && product.images[specKey].length > 0) {
          mainImage.src = product.images[specKey][0];
          photoAlbum.innerHTML = product.images[specKey]
          .map(img => `<li onclick="showImage(event)"><img src="${img}" alt="Product Image"></li>`)
          .join('');
        } else {
          // Fallback to using default images if no spec-specific image is available
          if (defaultImages.length > 0) {
            mainImage.src = defaultImages[0];
            photoAlbum.innerHTML = defaultImages
            .map(img => `<li onclick="showImage(event)"><img src="${img}" alt="Product Image"></li>`)
            .join('');
          }
        }
      }

      // Fetch data and render the product details
      fetch('data.json')
        .then(response => response.json())
        .then(data => {
          const id = getQueryParam('id') || 0;
          const product = data[id];

          if (!product) {
            document.body.innerHTML = `
            <div style="display:flex; flex-direction:column;margin-inline:auto;align-items:center;text-align:center">
              <h1>hổng thấy sản phẩm có id=${id}</h1>
              <button style="width: fit-content" id="home-btn"><a href="index.html">&#127968;&nbsp; trang chủ</a></button>
            </div>
            `;
            return;
          }

          // Update product text details
          document.getElementById('productName').textContent = product.name;
          document.getElementById('productCode').textContent = 'MS: ' + ('00000' + id).slice(-5);
          document.getElementById('productPrice').textContent = product.base_price;

          // Get references to image elements
          const mainImage = document.getElementById('mainImage');
          const photoAlbum = document.getElementById('photoAlbum');
          const defaultImages = (product.images.default || []);

          // Set default images initially
          if (defaultImages.length > 0) {
            mainImage.src = defaultImages[0];
            photoAlbum.innerHTML = defaultImages
            .map(img => `<li onclick="showImage(event)"><img src="${img}" alt="Product Image"></li>`)
            .join('');
          }

          // Populate specifications – each specification will render buttons
          const specDiv = document.getElementById('specifications');
          for (const [specType, values] of Object.entries(product.specifications)) {
            const specSection = document.createElement('div');
            specSection.innerHTML = `<h4>${specType}</h4>`;
            values.forEach((val, idx) => {
              const btn = document.createElement('button');
              btn.textContent = val;
              btn.className = 'spec-option';
              btn.dataset.specType = specType;
              btn.dataset.specValue = idx;
              btn.addEventListener('click', function () {
                // Remove 'active' class for all buttons in this group, then mark this one active.
                document.querySelectorAll(`button[data-spec-type="${specType}"]`)
                  .forEach(button => button.classList.remove('active'));
                btn.classList.add('active');
                selectedSpecs[specType] = idx;
                updateDisplay(product, defaultImages, mainImage, photoAlbum);
              });
              specSection.appendChild(btn);
            });
            specDiv.appendChild(specSection);
          }

          // CONTACT ME button functionality (captures the product section as canvas)
          document.querySelector('.buy--btn').addEventListener('click', function (e) {
            e.preventDefault();
            html2canvas(document.getElementById('product')).then(canvas => {
              const notification = document.createElement('div');
              notification.id = 'notification';
              notification.className = 'notification-overlay';
              notification.innerHTML = `
                <div class='notification-popup'>
                  <div class="notification-header">
                    <h2>Đã chụp màn hình!</h2>
                    <a onclick="closeNotification()">X</a>
                  </div>
                  <div class="notification-body">
                    Đã chụp màn hình, vui lòng liên hệ mình để được tư vấn trực tiếp!
                  </div>
                  <div class="notification-footer">
                    <a href="mailto:nguyenanvi122333@gmail.com" target="_blank">Gửi mail</a>
                    <a href="https://zalo.me/0939963285" target="_blank">Chat Zalo</a>
                    <a href="tel:+84939963285" target="_blank">Gọi Điện</a>
                    <a onclick="closeNotification()">Để sau</a>
                  </div>
                </div>
              `
              
              const link = document.createElement('a');
              link.download = 'gửi hình Vĩ tư vấn.png'; // File name for the download
              link.href = canvas.toDataURL("image/png");
              
              // Trigger the download
              link.click();

              document.body.appendChild(notification);
              setTimeout(() => notification.remove(), 150000);
            });
          });
        })
        .catch(error => {
          console.error('Error loading product data:', error);
        });

        function closeNotification(){
          try {
            document.getElementById('notification').remove();
          } catch (error) {
            console.error("error closing notification:", error)
          }        
        }

        function showImage(event) {
            // Find the image element inside the clicked element
            const imgElement = event.currentTarget.querySelector("img");

            // Check if an image was found
            if (imgElement) {
                const imageSrc = imgElement.src;

                document.getElementById('mainImage').setAttribute('src', imageSrc);
            } else {
                console.log("No image found inside the clicked element.");
            }
        }

        // for header background's
        function parallax() {
          var parallax = document.getElementById("parallax");
          parallax.style.marginTop = -(window.pageYOffset / 2)+'px';
        }

        window.addEventListener("scroll", parallax, false);

    </script>
  </body>
</html>